== Blenda - программа для расчета прохождения лучей через сотовую бленду == 

Сотовая бленда представляет собой ячеистую структуру из тонкого алюминия с черным матовым покрытием. Каждая ячейка имеет шестиугольное сечение и блокирует прямое прохождение лучей, падающих под углом w>arctan(a/L), где a – радиус окружности, описывающей шестиугольник, L – длина бленды. Проходят только лучи, отраженные от стенок. 

У бленды для системы лазерной связи сторона шестиугольника составляет 2.5мм, толщина стенок с учетом покрытия – 40мкм. Длина бленды составляет всего 7 см, тогда как классическая бленда для того же применения (диаметр объектива 400 мм, надо отсечь солнце с углов более 4 градуса) должна была бы иметь длину 5.8 метра!

Однако испытания выявили целый ряд негативных эффектов, которые необходимо принимать во внимание:
# Поскольку черная краска не полностью поглощает свет, при углах свыше 4о в объектив все равно попадают переотраженные от стенок лучи. Мало того, хотя краска называется матовой, но ее характеристика отличается от ламбертовской: лучи, падающие под малыми углами к поверхности, отражаются преимущественно направленно, а не диффузно.
# Будучи совокупностью цилиндров, сотовая бленда пропускает без ослабления только лучи, идущие по нормали к объективу, при отклонении от оси лучи начинают ослабляться, и чем длиннее сотовая бленда, тем сильнее. Значит, с первым недостатком нельзя бороться, попросту увеличивая длину бленды – это приведет к излишнему «виньетированию» боковых лучей, еще входящих в поле зрения объектива. 
# При изготовлении бленды не удается выдержать строгую параллельность стенок, из-за чего некоторое ослабление происходит даже для лучей, приходящих по нормали.
# Из-за прохождения через регулярную ячеистую структуру бленды возникают сильные дифракционные максимумы, причем для боковых лучей они более выражены, поскольку в каждой ячейке появляется затененный участок, увеличивая «эффективную толщину стенок». 

Как можно видеть, нельзя улучшить одни характеристики бленды, не ухудшая других. В отличие от конусной бленды, которую можно наращивать, уменьшая вредное влияние солнца, но не ослабляя лучей из поля зрения, сотовая бленда ограничена по длине.

Иными словами, такую бленду нельзя сделать «с запасом», требуется точный расчет ее параметров, чтобы достичь хороших результатов. Для этого и понадобилось написать данную программу.

Сейчас выложена "последняя стабильная версия", в ней, к сожалению, не рассчитывается ни диффузное отражение, ни дифракция. Соответствующие процедуры уже написаны, но требуют еще некоторой "доработки напильником".

=== Справочный материал по программе ===
; ''' Параметры бленды '''
: в общем и целом, названия говорят сами за себя. "направленное отражение" - подразумевается коэффициент направленного отражения. Рядом чуть позже появится коэффициент диффузного отражения.

;''' Парамеры отрисовки '''
: Разрешение по X/Y: размеры (в пикселях) прямоугольника, в который вписана одна ячейка бленды. Затем по каждому пикселю будет отправлен луч или несколько лучей с разным наклоном, если источник света протяженный. Очень сильно влияет на скорость работы, 100х100 является разумным выбором. 

: Итераций по углам - укызывает для протяженных источников, набором скольких точечных их представить. Если указано 7, значит будет 7 итераций по одному углу (по горизонтали) и для каждой из них по 7 итераций по другому, итого 49 лучей. 

: Превышение исходного разрешения - практически бесполезная функция. Позволяет "пускать" лучи с бОльшим пространственным разрешением, чем изображается на экране. Значительно замедляет расчет, но почти не сказывается на результате.

; ''' Источник света '''
: Угол к оптической оси - указывает направление на источник света. По умолчанию откладывается по горизонтали, но можно его изменить, задав поворот вокруг оси. 

: Угловой размер источника - задается в градусах.

: Угол зрения - на данный момент этот параметр ничего не делает. Понадобится при расчете дифракции и вообще изображения на фотоприемной матрице.

: Поворот вокруг оси - про него было сказано выше.

; ''' Построение графика '''
: Названия говорят за себя, можно разве что прокомментировать опцию "построить для нескольких углов поворота" и количество итераций. Она нужна, чтобы оценить анизотропность бленды. При круглом сечении лучи, приходящие с разных направлений, но под одним и тем же углом к оптической оси, ослаблялись бы одинаково. Если же ячейки шестиугольные, для разных углов поворота источника картина будет разной, однако при повороте на 60 градусов из-за симметрии она начнет повторяться. Поэтому, если включить опцию "построить для нескольких углов поворота" и выбрать число итераций - 3, будут построены графики для углов 0, 15 и 30 градусов. В случае квадратного сечения это было бы 0, 22.5 и 45 градусов. 


